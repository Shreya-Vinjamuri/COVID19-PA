{
    "type": [
        2,
        2,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        2,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        2,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        3,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        2,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        2,
        2,
        2,
        2,
        2,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        3,
        0,
        1,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        2,
        0,
        1,
        2,
        0,
        1,
        2,
        0,
        1,
        2,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        3,
        3,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        3,
        3,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        2,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        2,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        2,
        2,
        2,
        2,
        2,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        2,
        3,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        2
    ],
    "data": [
        "\nR version 4.0.2 (2020-06-22) -- \"Taking Off Again\"\nCopyright (C) 2020 The R Foundation for Statistical Computing\nPlatform: x86_64-apple-darwin17.0 (64-bit)\n\nR is free software and comes with ABSOLUTELY NO WARRANTY.\nYou are welcome to redistribute it under certain conditions.\nType 'license()' or 'licence()' for distribution details.\n\n  Natural language support but running in an English locale\n\nR is a collaborative project with many contributors.\nType 'contributors()' for more information and\n'citation()' on how to cite R or R packages in publications.\n\n",
        "Type 'demo()' for some demos, 'help()' for on-line help, or\n'help.start()' for an HTML browser interface to help.\nType 'q()' to quit R.\n\n[Workspace loaded from ~/Documents/GitHub/COVID19-PA/.RData]\n\n",
        "> ",
        "knitr::opts_chunk$set(echo = TRUE)",
        "> ",
        "",
        "> ",
        "library(readr)",
        "> ",
        "library(dplyr)",
        "> ",
        "library(tidyr)",
        "> ",
        "library(lubridate)",
        "> ",
        "library(rvest)",
        "> ",
        "install.packages(\"ggplot2\")",
        "trying URL 'https://cran.rstudio.com/bin/macosx/contrib/4.0/ggplot2_3.3.2.tgz'\n",
        "Content type 'application/x-gzip'",
        " length 4064530 bytes (3.9 MB)\n",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "\n",
        "downloaded 3.9 MB\n\n",
        "\nThe downloaded binary packages are in\n\t/var/folders/0x/q7f5p20n2d922ysgkclj8m9c0000gp/T//RtmpFkWSar/downloaded_packages\n",
        "> ",
        "library(ggplot2)",
        "> ",
        "",
        "> ",
        "",
        "> ",
        "#mutate makes a new column",
        "> ",
        "#filter just gives you the data you want",
        "> ",
        "#summarize condenses to one row ",
        "> ",
        "#groupby just groups dataframes even though we don't see it; summarize works per group",
        "> ",
        "#mutate_at(vars(-group_cols()), sum) %>%  #add all numbers per date in a group",
        "> ",
        "#- sign drops what variables you don't want to deal with",
        "> ",
        "",
        "> ",
        "tidy_data_long <- function(tib) {",
        "+ ",
        "  tib %>% ",
        "+ ",
        "    filter(Province_State == \"Pennsylvania\") %>% ",
        "+ ",
        "    filter (Admin2 == \"Centre\") %>%",
        "+ ",
        "    select(-Lat, -Long_,-UID,-iso2, -iso3,-code3,-FIPS,-Province_State,-Country_Region,-Combined_Key) %>% ",
        "+ ",
        "    pivot_longer(!Admin2, names_to = \"Dates\", values_to = \"Covid_count\") %>% ",
        "+ ",
        "    mutate(Dates = as.Date(paste0(Dates, 20), format = \"%m/%d/%y\") )",
        "+ ",
        "}",
        "> ",
        "confirmed_cases <- read_csv(\"https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_confirmed_US.csv\")",
        "> ",
        "COVID_data <- tidy_data_long(confirmed_cases)",
        "> ",
        "",
        "> ",
        "COVID_daycount <- COVID_data %>%",
        "+ ",
        "  rename (count_n = Covid_count) %>% #the covid counts",
        "+ ",
        "  group_by(Admin2) %>%",
        "+ ",
        "  mutate (count_n_minus_1 = lag(count_n), count_by_day = count_n - count_n_minus_1) %>%",
        "+ ",
        "  ungroup() %>%",
        "+ ",
        "  ",
        "+ ",
        "  select(Admin2, Dates, count_by_day) ",
        "> ",
        "COVID_daycount$count_by_day[is.na(COVID_daycount$count_by_day)] <- 0",
        "> ",
        "",
        "> ",
        "if(any(COVID_daycount$count_by_day < 0))  {",
        "+ ",
        "  warning(\"Negative cases detected, clean data.\")",
        "+ ",
        "}",
        "> ",
        "COVID_daycount$count_by_day[COVID_daycount$count_by_day < 0] <- 0",
        "> ",
        "",
        "> ",
        "my_plot<- ggplot(COVID_daycount, aes(x=Dates, y = count_by_day)) + geom_line() + ",
        "+ ",
        "  labs(x= \"Centre County\", y=\"New Counts Per Day\")",
        "> ",
        "my_plot+scale_x_date(date_labels = \"%b\")",
        "> ",
        "View(my_plot)",
        "> ",
        "install.packages(\"plotly\")",
        "trying URL 'https://cran.rstudio.com/bin/macosx/contrib/4.0/plotly_4.9.2.1.tgz'\n",
        "Content type 'application/x-gzip'",
        " length 2987998 bytes (2.8 MB)\n",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "\n",
        "downloaded 2.8 MB\n\n",
        "\nThe downloaded binary packages are in\n\t/var/folders/0x/q7f5p20n2d922ysgkclj8m9c0000gp/T//RtmpFkWSar/downloaded_packages\n",
        "> ",
        "library (plotly)",
        "> ",
        "ggplotly(my_plot)",
        "> ",
        "library(readr)",
        "> ",
        "library(dplyr)",
        "> ",
        "library(tidyr)",
        "> ",
        "",
        "> ",
        "",
        "> ",
        "tidy_data_long <- function(tib) {",
        "+ ",
        "  tib %>% ",
        "+ ",
        "    filter(Province_State == \"Pennsylvania\") %>% ",
        "+ ",
        "    select(-Lat, -Long_,-UID,-iso2, -iso3,-code3,-FIPS,-Province_State,-Country_Region,-Combined_Key) %>% ",
        "+ ",
        "    pivot_longer(!Admin2, names_to = \"Dates\", values_to = \"Covid_count\") %>% ",
        "+ ",
        "    mutate(Dates = as.Date(paste0(Dates, 20), format = \"%m/%d/%y\") )",
        "+ ",
        "}",
        "> ",
        "confirmed_cases <- read_csv(\"https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_confirmed_US.csv\")",
        "> ",
        "COVID_data <- tidy_data_long(confirmed_cases)",
        "> ",
        "",
        "> ",
        "COVID_daycount <- COVID_data %>%",
        "+ ",
        "  rename (count_n = Covid_count) %>% #the covid counts",
        "+ ",
        "  group_by(Admin2) %>%",
        "+ ",
        "  mutate (count_n_minus_1 = lag(count_n), count_by_day = count_n - count_n_minus_1) %>%",
        "+ ",
        "  ungroup()",
        "> ",
        "",
        "> ",
        "",
        "> ",
        "COVID_daycount$count_by_day[is.na(COVID_daycount$count_by_day)] <- 0",
        "> ",
        "",
        "> ",
        "if(any(COVID_daycount$count_by_day < 0))  {",
        "+ ",
        "  warning(\"Negative cases detected, clean data.\")",
        "+ ",
        "}",
        "> ",
        "COVID_daycount$count_by_day[COVID_daycount$count_by_day < 0] <- 0",
        "> ",
        "",
        "> ",
        "COVID_Sum <- COVID_daycount %>%",
        "+ ",
        "  group_by(Admin2) %>%",
        "+ ",
        "  summarize(Total_cases = sum(count_by_day)) %>%",
        "+ ",
        "  ungroup()",
        "> ",
        "",
        "> ",
        "COVID_Sum =COVID_Sum[-c(50,61),]",
        "> ",
        "library(sf)",
        "> ",
        "map <- st_read(\"gadm36_USA.gpkg\",layer = \"gadm36_USA_2\" )",
        "Error: Cannot open \"gadm36_USA.gpkg\"; The file doesn't seem to exist.\n",
        "> ",
        "library(readr)",
        "> ",
        "library(dplyr)",
        "> ",
        "library(tidyr)",
        "> ",
        "",
        "> ",
        "",
        "> ",
        "tidy_data_long <- function(tib) {",
        "+ ",
        "  tib %>% ",
        "+ ",
        "    filter(Province_State == \"Pennsylvania\") %>% ",
        "+ ",
        "    select(-Lat, -Long_,-UID,-iso2, -iso3,-code3,-FIPS,-Province_State,-Country_Region,-Combined_Key) %>% ",
        "+ ",
        "    pivot_longer(!Admin2, names_to = \"Dates\", values_to = \"Covid_count\") %>% ",
        "+ ",
        "    mutate(Dates = as.Date(paste0(Dates, 20), format = \"%m/%d/%y\") )",
        "+ ",
        "}",
        "> ",
        "confirmed_cases <- read_csv(\"https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_confirmed_US.csv\")",
        "> ",
        "COVID_data <- tidy_data_long(confirmed_cases)",
        "> ",
        "",
        "> ",
        "COVID_daycount <- COVID_data %>%",
        "+ ",
        "  rename (count_n = Covid_count) %>% #the covid counts",
        "+ ",
        "  group_by(Admin2) %>%",
        "+ ",
        "  mutate (count_n_minus_1 = lag(count_n), count_by_day = count_n - count_n_minus_1) %>%",
        "+ ",
        "  ungroup()",
        "> ",
        "",
        "> ",
        "",
        "> ",
        "COVID_daycount$count_by_day[is.na(COVID_daycount$count_by_day)] <- 0",
        "> ",
        "",
        "> ",
        "if(any(COVID_daycount$count_by_day < 0))  {",
        "+ ",
        "  warning(\"Negative cases detected, clean data.\")",
        "+ ",
        "}",
        "> ",
        "COVID_daycount$count_by_day[COVID_daycount$count_by_day < 0] <- 0",
        "> ",
        "",
        "> ",
        "COVID_Sum <- COVID_daycount %>%",
        "+ ",
        "  group_by(Admin2) %>%",
        "+ ",
        "  summarize(Total_cases = sum(count_by_day)) %>%",
        "+ ",
        "  ungroup()",
        "> ",
        "",
        "> ",
        "COVID_Sum =COVID_Sum[-c(50,61),]",
        "> ",
        "library(sf)",
        "> ",
        "map <- st_read(\"gadm36_USA.gpkg\",layer = \"gadm36_USA_2\" )",
        "Reading layer `gadm36_USA_2' from data source `/Users/shreyavinjamuri/Documents/GitHub/COVID19-PA/gadm36_USA.gpkg' using driver `GPKG'\nSimple feature collection with 3148 features and 13 fields\ngeometry type:  MULTIPOLYGON\ndimension:      XY\nbbox:           xmin: -179.1506 ymin: 18.90986 xmax: 179.7734 ymax: 72.6875\ngeographic CRS: WGS 84\n",
        "> ",
        "#st_layers(\"gadm36_USA.gpkg\")",
        "> ",
        "",
        "> ",
        "penn_map <- map %>% ",
        "+ ",
        "  filter(NAME_1 == \"Pennsylvania\")",
        "> ",
        "",
        "> ",
        "colnames(penn_map)[colnames(penn_map) == 'NAME_2'] <- 'Admin2'",
        "> ",
        " # why does rename(Admin2 = NAME_2) not work",
        "> ",
        "penn_map<- mutate(penn_map, Admin2 = gsub(\" \", \"\", Admin2))",
        "> ",
        "plot(penn_map[\"Admin2\"])",
        "> ",
        "#why does plot(penn_map$NAME_2) not work?",
        "> ",
        "",
        "> ",
        "#library(tmap)",
        "> ",
        "inner_join(penn_map,COVID_Sum, by= \"Admin2\")",
        "Simple feature collection with 67 features and 14 fields\ngeometry type:  MULTIPOLYGON\ndimension:      XY\nbbox:           xmin: -80.51956 ymin: 39.71943 xmax: -74.69003 ymax: 42.26788\ngeographic CRS: WGS 84\nFirst 10 features:\n   GID_0        NAME_0    GID_1       NAME_1 NL_NAME_1\n1    USA United States USA.39_1 Pennsylvania      <NA>\n2    USA United States USA.39_1 Pennsylvania      <NA>\n3    USA United States USA.39_1 Pennsylvania      <NA>\n4    USA United States USA.39_1 Pennsylvania      <NA>\n5    USA United States",
        " USA.39_1 Pennsylvania      <NA>\n6    USA United States USA.39_1 Pennsylvania      <NA>\n7    USA United States USA.39_1 Pennsylvania      <NA>\n8    USA United States USA.39_1 Pennsylvania      <NA>\n9    USA United States USA.39_1 Pennsylvania      <NA>\n10   USA United States USA.39_1 Pennsylvania      <NA>\n         GID_2    Admin2 VARNAME_2 NL_NAME_2 TYPE_2 ENGTYPE_2\n1   USA.39.1_1     Adams      <NA>      <NA> County    County\n2   USA.39.2_1 Allegheny      <NA>      <NA> County    County\n3   USA.39.3_1 Armstrong",
        "      <NA>      <NA> County    County\n4   USA.39.4_1    Beaver      <NA>      <NA> County    County\n5   USA.39.5_1   Bedford      <NA>      <NA> County    County\n6   USA.39.6_1     Berks      <NA>      <NA> County    County\n7   USA.39.7_1     Blair      <NA>      <NA> County    County\n8   USA.39.8_1  Bradford      <NA>      <NA> County    County\n9   USA.39.9_1     Bucks      <NA>      <NA> County    County\n10 USA.39.10_1    Butler      <NA>      <NA> County    County\n   CC_2   HASC_2 Total_cases                           geom",
        "\n1  <NA> US.PA.AD         941 MULTIPOLYGON (((-77.45965 3...\n2  <NA> US.PA.AL       13362 MULTIPOLYGON (((-79.69289 4...\n3  <NA> US.PA.AR         515 MULTIPOLYGON (((-79.21564 4...\n4  <NA> US.PA.BA        2051 MULTIPOLYGON (((-80.51885 4...\n5  <NA> US.PA.BO         296 MULTIPOLYGON (((-78.80997 3...\n6  <NA> US.PA.BK        7819 MULTIPOLYGON (((-75.52785 4...\n7  <NA> US.PA.BL         911 MULTIPOLYGON (((-78.1172 40...\n8  <NA> US.PA.BF         368 MULTIPOLYGON (((-76.81335 4...\n9  <NA> US.PA.BC        9366 MULTIPOLYGON (((-75.01528 4...",
        "\n10 <NA> US.PA.BT        1276 MULTIPOLYGON (((-80.15752 4...\n",
        "> ",
        "#tmap_mode(mode = \"plot\")",
        "> ",
        "",
        "> ",
        "#tm_shape(Total_Sum_PA) +",
        "> ",
        "#  tm_polygons(col = \"Total_cases\", title = \"Total Cases\", palette = \"-RdYlBu\")",
        "> ",
        "",
        "> ",
        "",
        "> ",
        "library(readxl)",
        "> ",
        "Population_Data <- read_excel(\"Population_Data.xlsx\")",
        "> ",
        "colnames(Population_Data) <- Population_Data[1,]",
        "> ",
        "Population_Data = Population_Data[-c(1,2,70,71,72,73,74),]",
        "> ",
        "census_data <- select(Population_Data,\"Admin2\",\"2019\") %>%",
        "+ ",
        "  mutate(Admin2 = gsub(\" \",\"\", (gsub(\"\\\\.\", \"\", gsub(\"County, Pennsylvania\", \"\", Admin2) ))))",
        "> ",
        "relative_data <- inner_join(census_data,Total_Sum_PA, \"Admin2\") %>% ",
        "+ ",
        "  rename(\"Census\"='2019' ) %>% ",
        "+ ",
        "  select(Admin2, Total_cases, Census ) %>% ",
        "+ ",
        "  mutate(relativeCases = (Total_cases/Census * 100000))",
        "Error in is.data.frame(y) : object 'Total_Sum_PA' not found\n",
        "> ",
        "install.packages(\"tidyverse\")",
        "Installing package into ‘/Users/shreyavinjamuri/Library/R/4.0/library’\n(as ‘lib’ is unspecified)\n",
        "trying URL 'https://cran.rstudio.com/bin/macosx/contrib/4.0/tidyverse_1.3.0.tgz'\n",
        "Content type 'application/x-gzip'",
        " length 433049 bytes (422 KB)\n",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "=",
        "\n",
        "downloaded 422 KB\n\n",
        "\nThe downloaded binary packages are in\n\t/var/folders/0x/q7f5p20n2d922ysgkclj8m9c0000gp/T//RtmpFkWSar/downloaded_packages\n",
        "> ",
        "install.packages(\"readr\")",
        "Error in install.packages : Updating loaded packages\n",
        "> ",
        "install.packages(\"dplyr\") ",
        "Error in install.packages : Updating loaded packages\n",
        "> ",
        "install.packages(\"readxl\")",
        "Error in install.packages : Updating loaded packages\n",
        "> ",
        "library(readr)",
        "> ",
        "library(dplyr)",
        "> ",
        "library(tidyr)",
        "> ",
        "",
        "> ",
        "",
        "> ",
        "tidy_data_long <- function(tib) {",
        "+ ",
        "  tib %>% ",
        "+ ",
        "    filter(Province_State == \"Pennsylvania\") %>% ",
        "+ ",
        "    select(-Lat, -Long_,-UID,-iso2, -iso3,-code3,-FIPS,-Province_State,-Country_Region,-Combined_Key) %>% ",
        "+ ",
        "    pivot_longer(!Admin2, names_to = \"Dates\", values_to = \"Covid_count\") %>% ",
        "+ ",
        "    mutate(Dates = as.Date(paste0(Dates, 20), format = \"%m/%d/%y\") )",
        "+ ",
        "}",
        "> ",
        "confirmed_cases <- read_csv(\"https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_confirmed_US.csv\")",
        "Parsed with column specification:\ncols(\n  .default = col_double(),\n  iso2 = \u001B[31mcol_character()\u001B[39m,\n  iso3 = \u001B[31mcol_character()\u001B[39m,\n  Admin2 = \u001B[31mcol_character()\u001B[39m,\n  Province_State = \u001B[31mcol_character()\u001B[39m,\n  Country_Region = \u001B[31mcol_character()\u001B[39m,\n  Combined_Key = \u001B[31mcol_character()\u001B[39m\n)\n",
        "See spec(...) for full column specifications.\n",
        "> ",
        "COVID_data <- tidy_data_long(confirmed_cases)",
        "> ",
        "",
        "> ",
        "COVID_daycount <- COVID_data %>%",
        "+ ",
        "  rename (count_n = Covid_count) %>% #the covid counts",
        "+ ",
        "  group_by(Admin2) %>%",
        "+ ",
        "  mutate (count_n_minus_1 = lag(count_n), count_by_day = count_n - count_n_minus_1) %>%",
        "+ ",
        "  ungroup()",
        "> ",
        "",
        "> ",
        "",
        "> ",
        "COVID_daycount$count_by_day[is.na(COVID_daycount$count_by_day)] <- 0",
        "> ",
        "",
        "> ",
        "if(any(COVID_daycount$count_by_day < 0))  {",
        "+ ",
        "  warning(\"Negative cases detected, clean data.\")",
        "+ ",
        "}",
        "Warning message:\n",
        "Negative cases detected, clean data. \n",
        "> ",
        "COVID_daycount$count_by_day[COVID_daycount$count_by_day < 0] <- 0",
        "> ",
        "",
        "> ",
        "COVID_Sum <- COVID_daycount %>%",
        "+ ",
        "  group_by(Admin2) %>%",
        "+ ",
        "  summarize(Total_cases = sum(count_by_day)) %>%",
        "+ ",
        "  ungroup()",
        "`summarise()` ungrouping output (override with `.groups` argument)\n",
        "> ",
        "",
        "> ",
        "COVID_Sum =COVID_Sum[-c(50,61),]",
        "> ",
        "library(sf)",
        "> ",
        "map <- st_read(\"gadm36_USA.gpkg\",layer = \"gadm36_USA_2\" )",
        "Reading layer `gadm36_USA_2' from data source `/Users/shreyavinjamuri/Documents/GitHub/COVID19-PA/gadm36_USA.gpkg' using driver `GPKG'\nSimple feature collection with 3148 features and 13 fields\ngeometry type:  MULTIPOLYGON\ndimension:      XY\nbbox:           xmin: -179.1506 ymin: 18.90986 xmax: 179.7734 ymax: 72.6875\ngeographic CRS: WGS 84\n",
        "> ",
        "#st_layers(\"gadm36_USA.gpkg\")",
        "> ",
        "",
        "> ",
        "penn_map <- map %>% ",
        "+ ",
        "  filter(NAME_1 == \"Pennsylvania\")",
        "> ",
        "",
        "> ",
        "colnames(penn_map)[colnames(penn_map) == 'NAME_2'] <- 'Admin2'",
        "> ",
        " # why does rename(Admin2 = NAME_2) not work",
        "> ",
        "penn_map<- mutate(penn_map, Admin2 = gsub(\" \", \"\", Admin2))",
        "> ",
        "plot(penn_map[\"Admin2\"])",
        "> ",
        "#why does plot(penn_map$NAME_2) not work?",
        "> ",
        "",
        "> ",
        "#library(tmap)",
        "> ",
        "inner_join(penn_map,COVID_Sum, by= \"Admin2\")",
        "Simple feature collection with 67 features and 14 fields\ngeometry type:  MULTIPOLYGON\ndimension:      XY\nbbox:           xmin: -80.51956 ymin: 39.71943 xmax: -74.69003 ymax: 42.26788\ngeographic CRS: WGS 84\nFirst 10 features:\n   GID_0        NAME_0    GID_1       NAME_1 NL_NAME_1       GID_2    Admin2\n1    USA United States USA.39_1 Pennsylvania      <NA>  USA.39.1_1     Adams\n2    USA United States USA.39_1 Pennsylvania      <NA>  USA.39.2_1 Allegheny\n3    USA United States USA.39_1 Pennsylvania      <NA>  USA.39.3_1",
        " Armstrong\n4    USA United States USA.39_1 Pennsylvania      <NA>  USA.39.4_1    Beaver\n5    USA United States USA.39_1 Pennsylvania      <NA>  USA.39.5_1   Bedford\n6    USA United States USA.39_1 Pennsylvania      <NA>  USA.39.6_1     Berks\n7    USA United States USA.39_1 Pennsylvania      <NA>  USA.39.7_1     Blair\n8    USA United States USA.39_1 Pennsylvania      <NA>  USA.39.8_1  Bradford\n9    USA United States USA.39_1 Pennsylvania      <NA>  USA.39.9_1     Bucks\n10   USA United States USA.39_1 Pennsylvania",
        "      <NA> USA.39.10_1    Butler\n   VARNAME_2 NL_NAME_2 TYPE_2 ENGTYPE_2 CC_2   HASC_2 Total_cases\n1       <NA>      <NA> County    County <NA> US.PA.AD         941\n2       <NA>      <NA> County    County <NA> US.PA.AL       13362\n3       <NA>      <NA> County    County <NA> US.PA.AR         515\n4       <NA>      <NA> County    County <NA> US.PA.BA        2051\n5       <NA>      <NA> County    County <NA> US.PA.BO         296\n6       <NA>      <NA> County    County <NA> US.PA.BK        7819\n7       <NA>      <NA>",
        " County    County <NA> US.PA.BL         911\n8       <NA>      <NA> County    County <NA> US.PA.BF         368\n9       <NA>      <NA> County    County <NA> US.PA.BC        9366\n10      <NA>      <NA> County    County <NA> US.PA.BT        1276\n                             geom\n1  MULTIPOLYGON (((-77.45965 3...\n2  MULTIPOLYGON (((-79.69289 4...\n3  MULTIPOLYGON (((-79.21564 4...\n4  MULTIPOLYGON (((-80.51885 4...\n5  MULTIPOLYGON (((-78.80997 3...\n6  MULTIPOLYGON (((-75.52785 4...\n7  MULTIPOLYGON (((-78.1172 40...",
        "\n8  MULTIPOLYGON (((-76.81335 4...\n9  MULTIPOLYGON (((-75.01528 4...\n10 MULTIPOLYGON (((-80.15752 4...\n",
        "> ",
        "#tmap_mode(mode = \"plot\")",
        "> ",
        "",
        "> ",
        "#tm_shape(Total_Sum_PA) +",
        "> ",
        "#  tm_polygons(col = \"Total_cases\", title = \"Total Cases\", palette = \"-RdYlBu\")",
        "> ",
        "",
        "> ",
        "",
        "> ",
        "library(readxl)",
        "> ",
        "Population_Data <- read_excel(\"Population_Data.xlsx\")",
        "\r-\r/\r                                                                              \r",
        "New names:\n* `` -> ...2\n* `` -> ...3\n* `` -> ...4\n* `` -> ...5\n* `` -> ...6\n* ...\n",
        "> ",
        "colnames(Population_Data) <- Population_Data[1,]",
        "> ",
        "Population_Data = Population_Data[-c(1,2,70,71,72,73,74),]",
        "> ",
        "census_data <- select(Population_Data,\"Admin2\",\"2019\") %>%",
        "+ ",
        "  mutate(Admin2 = gsub(\" \",\"\", (gsub(\"\\\\.\", \"\", gsub(\"County, Pennsylvania\", \"\", Admin2) ))))",
        "\nRestarting R session...\n\n"
    ]
}